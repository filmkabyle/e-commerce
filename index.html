<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ŸÖÿ™ÿ¨ÿ± ÿßŸÑÿ¨ÿ≤ÿßÿ¶ÿ± (DZ Shop) - ÿßŸÑŸÖÿ™ŸàÿßŸÅŸÇ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');
        body { font-family: 'Cairo', sans-serif; background-color: #f7f7f9; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .btn-primary { @apply bg-emerald-600 text-white font-bold rounded-xl transition-all duration-300 hover:bg-emerald-700 active:scale-[0.98]; }
        .animate-fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react.dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>

    <div id="root">
        <div class="fixed inset-0 flex items-center justify-center bg-gray-50 z-[500]">
            <div class="text-center">
                <svg class="animate-spin h-12 w-12 text-emerald-600 mx-auto mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                <p class="text-gray-600 text-lg font-semibold">ÿ¨ÿßÿ±Ÿç ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑŸÖÿ™ÿ¨ÿ±...</p>
            </div>
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useMemo } = React;

        // üö® ÿ∂ÿπ ÿ±ÿßÿ®ÿ∑ Google Apps Script ÿßŸÑÿ¨ÿØŸäÿØ ŸáŸÜÿß üö®
        const GAS_API_URL = 'https://script.google.com/macros/s/AKfycbwiaw6p3DKnwiICFV8YeC_RVcs6b_OLvyL__mVfRu-7eQLJA1BBOWe1w8oI0Z75EW0/exec'; 

        // --- ÿ®ŸäÿßŸÜÿßÿ™ ŸàŸáŸÖŸäÿ© ŸÑŸÑÿ∑Ÿàÿßÿ±ÿ¶ ---
        const MOCK_PRODUCTS = [
            { id: 9001, name: "Ÿáÿßÿ™ŸÅ ÿ∞ŸÉŸä 5G", price: 125000, category: "ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸäÿßÿ™", images: ["https://placehold.co/400x400/10b981/ffffff?text=Phone"], rating: 4.8, reviews: 55, isNew: true, shortDesc: "ÿ¥ÿßÿ¥ÿ© AMOLED.", description: "Ÿáÿßÿ™ŸÅ ŸÇŸàŸä." }, 
            { id: 9002, name: "ÿ≥ÿßÿπÿ© ÿ∞ŸÉŸäÿ©", price: 15000, category: "ÿ•ŸÉÿ≥ÿ≥Ÿàÿßÿ±ÿßÿ™", images: ["https://placehold.co/400x400/ef4444/ffffff?text=Watch"], rating: 4.5, reviews: 80, isNew: false, shortDesc: "ÿ™ÿ™ÿ®ÿπ ÿßŸÑŸÑŸäÿßŸÇÿ©.", description: "ÿ≥ÿßÿπÿ© ŸÖŸÇÿßŸàŸÖÿ© ŸÑŸÑŸÖÿßÿ°." }
        ];

        // === ÿßŸÑÿ£ŸäŸÇŸàŸÜÿßÿ™ ===
        const Icon = ({ icon, size = 24, className = "" }) => {
            const icons = {
                ShoppingCart: <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4H6zM3 6h18M6 10h12" />,
                X: <path d="M18 6L6 18M6 6l12 12" />,
                Search: <path d="M11 17a6 6 0 1 0 0-12 6 6 0 0 0 0 12zM15 15l4 4" />,
                CheckCircle: <path d="M22 11.08V12a10 10 0 1 1-5.05-8.83M13 3v8h8" />,
                Star: <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />,
                ArrowRight: <path d="M5 12h14M12 5l7 7-7 7" />,
                Plus: <path d="M12 5v14M5 12h14" />,
                Minus: <path d="M5 12h14" />,
                Trash2: <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2M10 11v6M14 11v6" />,
                Loader2: <path d="M21 12a9 9 0 1 1-6.219-8.56" />,
            };
            const path = icons[icon];
            return <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{path || <circle cx="12" cy="12" r="10"/>}</svg>;
        };

        const WILAYAS = ["01 - ÿ£ÿØÿ±ÿßÿ±", "16 - ÿßŸÑÿ¨ÿ≤ÿßÿ¶ÿ±", "31 - ŸàŸáÿ±ÿßŸÜ", "25 - ŸÇÿ≥ŸÜÿ∑ŸäŸÜÿ©", "30 - Ÿàÿ±ŸÇŸÑÿ©"].sort();
        const PRODUCT_CATEGORIES = ['ŸÉŸÑ ÿßŸÑŸÅÿ¶ÿßÿ™', 'ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸäÿßÿ™', 'ŸÖŸÑÿßÿ®ÿ≥', 'ÿ•ŸÉÿ≥ÿ≥Ÿàÿßÿ±ÿßÿ™', 'ÿπŸÜÿßŸäÿ© ÿ¥ÿÆÿµŸäÿ©', 'ŸÖŸÜÿ≤ŸÑ ŸàŸÖÿ∑ÿ®ÿÆ'];

        const showNotification = (message, type = 'green') => {
            const box = document.getElementById('message-box');
            if (!box) return;
            const color = type === 'red' ? 'bg-red-600' : type === 'yellow' ? 'bg-yellow-600' : 'bg-green-600';
            box.innerHTML = `<div class="text-white p-3 rounded-xl fixed bottom-5 left-1/2 -translate-x-1/2 shadow-xl z-[300] font-bold text-sm ${color}">${message}</div>`;
            setTimeout(() => box.innerHTML = '', 4000);
        };

        const App = () => {
            const [products, setProducts] = useState([]);
            const [orders, setOrders] = useState([]);
            const [view, setView] = useState('home');
            const [cart, setCart] = useState([]);
            const [isCartOpen, setIsCartOpen] = useState(false);
            const [selectedProduct, setSelectedProduct] = useState(null);
            const [isLoading, setIsLoading] = useState(true);
            const [searchTerm, setSearchTerm] = useState('');
            const [filterCategory, setFilterCategory] = useState('ŸÉŸÑ ÿßŸÑŸÅÿ¶ÿßÿ™');
            const [isAdminAuthenticated, setIsAdminAuthenticated] = useState(false);
            const [adminPass, setAdminPass] = useState('');
            const [adminTab, setAdminTab] = useState('dashboard');
            const [newProduct, setNewProduct] = useState({ name: '', price: '', category: 'ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸäÿßÿ™', images: '', shortDesc: '', description: '' });
            const [formData, setFormData] = useState({ fullName: '', phone: '', wilaya: WILAYAS[0] || '', commune: '', address: '' });

            // ÿØÿßŸÑÿ© ÿßŸÑÿßÿ™ÿµÿßŸÑ (ÿ™ŸÖ ÿ™ÿπÿØŸäŸÑŸáÿß ŸÑÿ™ŸÇÿ®ŸÑ ÿßŸÑÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑÿπÿ±ÿ®Ÿäÿ©)
            const fetchData = useCallback(async (sheetName) => {
                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 5000);
                try {
                    const response = await fetch(`${GAS_API_URL}?sheet=${sheetName}`, { signal: controller.signal });
                    clearTimeout(timeoutId);
                    if (!response.ok) throw new Error("HTTP Error");
                    return await response.json();
                } catch (error) { throw error; }
            }, []);

            const sendData = async (action, data) => {
                setIsLoading(true);
                try {
                    const response = await fetch(GAS_API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'text/plain;charset=utf-8' }, // ÿßÿ≥ÿ™ÿÆÿØÿßŸÖ text/plain ŸÑÿ™ÿ¨ŸÜÿ® ŸÖÿ¥ÿßŸÉŸÑ CORS ŸÅŸä GAS
                        body: JSON.stringify({ action, data }),
                    });
                    const result = await response.json();
                    if (!result.success) throw new Error(result.error || 'ŸÅÿ¥ŸÑ');
                    return result;
                } catch (error) {
                    showNotification(`ÿÆÿ∑ÿ£: ${error.message}`, 'red');
                    return { success: false };
                } finally {
                    setIsLoading(false);
                }
            };

            // --- ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ (ÿ™ŸÖ ÿ™ÿπÿØŸäŸÑ ÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑÿ£Ÿàÿ±ÿßŸÇ ŸÑŸÑÿπÿ±ÿ®Ÿäÿ©) ---
            const loadInitialData = useCallback(async () => {
                setIsLoading(true);
                try {
                    // ÿ∑ŸÑÿ® ÿßŸÑÿ£Ÿàÿ±ÿßŸÇ ÿ®ÿßŸÑÿ£ÿ≥ŸÖÿßÿ° ÿßŸÑÿπÿ±ÿ®Ÿäÿ© ŸÉŸÖÿß ŸÅŸä ŸÉŸàÿØ GAS
                    const [fetchedProducts, fetchedOrders] = await Promise.all([
                        fetchData('ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™'),
                        fetchData('ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™')
                    ]);

                    setProducts(fetchedProducts.map(p => ({
                        ...p, 
                        id: Number(p.id),
                        price: Number(p.price),
                        rating: Number(p.rating || 5.0),
                        reviews: Number(p.reviews || 0),
                        images: (p.images && typeof p.images === 'string') ? p.images.split('|') : ["https://placehold.co/400x400/f3f4f6/a3a3a3?text=DZ"],
                        isNew: String(p.isNew).toLowerCase() === 'true',
                    })));
                    
                    setOrders(fetchedOrders.map(o => {
                        // ÿ™ÿ≠ŸàŸäŸÑ JSON Strings ÿ•ŸÑŸâ Objects
                        let items = [], customer = {};
                        try { items = JSON.parse(o.itemsJson || '[]'); } catch (e) {}
                        try { customer = JSON.parse(o.customerJson || '{}'); } catch (e) {}
                        return { ...o, id: Number(o.id), total: Number(o.total), items, customer };
                    }));
                    showNotification('ÿ™ŸÖ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ŸÜÿ¨ÿßÿ≠', 'green');

                } catch (error) {
                    console.warn("ŸÅÿ¥ŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑ:", error);
                    setProducts(MOCK_PRODUCTS);
                    showNotification('Ÿàÿ∂ÿπ ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑÿ™ÿ¨ÿ±Ÿäÿ®Ÿä (ŸÅÿ¥ŸÑ ÿßŸÑÿßÿ™ÿµÿßŸÑ)', 'yellow');
                } finally {
                    setIsLoading(false);
                }
            }, [fetchData]);

            useEffect(() => { loadInitialData(); }, [loadInitialData]);

            // --- ÿßŸÑÿπŸÖŸÑŸäÿßÿ™ (ÿ™ŸÖ ÿ™ÿπÿØŸäŸÑ ÿ£ÿ≥ŸÖÿßÿ° Actions ŸÑÿ™ÿ∑ÿßÿ®ŸÇ GAS) ---
            const addProduct = async () => {
                const productData = { ...newProduct, price: Number(newProduct.price), images: newProduct.images.split('|'), id: Date.now() };
                const result = await sendData('ADD_PRODUCT', productData); // ÿ™ŸÖ ÿßŸÑÿ™ÿπÿØŸäŸÑ ŸÑŸÄ ADD_PRODUCT
                if (result.success) {
                    setProducts(prev => [...prev, { ...productData, rating: 5, reviews: 0, isNew: true }]);
                    setNewProduct({ name: '', price: '', category: 'ÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸäÿßÿ™', images: '', shortDesc: '', description: '' });
                    showNotification('ÿ™ŸÖÿ™ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ©', 'green');
                }
            };

            const deleteProduct = async (id) => {
                if (!confirm("ÿ≠ÿ∞ŸÅ ÿßŸÑŸÖŸÜÿ™ÿ¨ÿü")) return;
                const result = await sendData('DELETE_PRODUCT', { id }); // ÿ™ŸÖ ÿßŸÑÿ™ÿπÿØŸäŸÑ ŸÑŸÄ DELETE_PRODUCT
                if (result.success) {
                    setProducts(prev => prev.filter(p => p.id !== id));
                    showNotification('ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ', 'green');
                }
            };

            const updateOrderStatus = async (id, status) => {
                const result = await sendData('UPDATE_ORDER_STATUS', { id, status }); // ÿ™ŸÖ ÿßŸÑÿ™ÿπÿØŸäŸÑ ŸÑŸÄ UPDATE_ORDER_STATUS
                if (result.success) {
                    setOrders(prev => prev.map(o => o.id === id ? { ...o, status } : o));
                    showNotification('ÿ™ŸÖ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´', 'green');
                }
            };

            const placeOrder = async (e) => {
                e.preventDefault();
                if (cart.length === 0) return;
                
                const total = cart.reduce((a,c) => a + (c.price*c.qty),0) + 400; // ÿ™ŸÉŸÑŸÅÿ© ÿ¥ÿ≠ŸÜ ÿ´ÿßÿ®ÿ™ÿ© ŸÑŸÑÿ™ÿ¨ÿ±ÿ®ÿ©
                const itemsToSend = cart.map(item => ({ id: item.id, name: item.name, qty: item.qty, price: item.price }));
                
                // ÿ™ÿ¨ŸáŸäÿ≤ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ ŸÑÿ™ÿ∑ÿßÿ®ŸÇ ÿ£ÿπŸÖÿØÿ© Google Sheets (itemsJson, customerJson)
                const orderData = {
                    id: Date.now(),
                    date: new Date().toLocaleDateString('ar-DZ'),
                    total: total,
                    status: 'pending',
                    itemsJson: JSON.stringify(itemsToSend), // ÿ™ÿ≠ŸàŸäŸÑ ŸÑŸÄ JSON String
                    customerJson: JSON.stringify(formData)  // ÿ™ÿ≠ŸàŸäŸÑ ŸÑŸÄ JSON String
                };
                
                const result = await sendData('ADD_ORDER', orderData); // ÿ™ŸÖ ÿßŸÑÿ™ÿπÿØŸäŸÑ ŸÑŸÄ ADD_ORDER

                if (result.success) {
                    setOrders(prev => [{...orderData, items: itemsToSend, customer: formData}, ...prev]);
                    setCart([]);
                    setView('success');
                }
            };

            // --- ÿØŸàÿßŸÑ ÿßŸÑÿ≥ŸÑÿ© ŸàÿßŸÑÿπÿ±ÿ∂ ---
            const updateCartQuantity = (id, change) => setCart(prev => prev.map(item => item.id === id ? { ...item, qty: item.qty + change } : item).filter(item => item.qty > 0));
            const addToCart = (product) => {
                setCart(prev => {
                    const existing = prev.find(item => item.id === product.id);
                    return existing ? prev.map(item => item.id === product.id ? { ...item, qty: item.qty + 1 } : item) : [...prev, { ...product, qty: 1 }];
                });
                setIsCartOpen(true);
            };

            const filteredProducts = useMemo(() => products.filter(p => (filterCategory === 'ŸÉŸÑ ÿßŸÑŸÅÿ¶ÿßÿ™' || p.category === filterCategory) && p.name.toLowerCase().includes(searchTerm.toLowerCase())), [products, searchTerm, filterCategory]);

            // --- ÿßŸÑŸàÿßÿ¨Ÿáÿ© ---
            const LoadingOverlay = () => <div className="fixed inset-0 bg-white/80 backdrop-blur-sm z-[200] flex items-center justify-center"><div className="flex items-center gap-3 bg-gray-900 text-white p-4 rounded-full"><Icon icon="Loader2" className="animate-spin" /><span className="font-bold">ÿ¨ÿßÿ±Ÿç ÿßŸÑŸÖÿπÿßŸÑÿ¨ÿ©...</span></div></div>;

            return (
                <div className="min-h-screen text-gray-800 font-sans" dir="rtl">
                    {isLoading && <LoadingOverlay />}
                    <div id="message-box"></div>
                    
                    {/* Navbar */}
                    <nav className="sticky top-0 z-50 bg-white/90 backdrop-blur-md shadow-sm border-b border-gray-100 p-4 flex justify-between items-center">
                        <div className="font-black text-xl cursor-pointer" onClick={() => setView('home')}>DZ Shop</div>
                        {view.includes('admin') ? <span className="bg-black text-white px-2 rounded text-xs">Admin</span> : 
                        <button onClick={() => setIsCartOpen(true)} className="relative p-2"><Icon icon="ShoppingCart" />{cart.length > 0 && <span className="absolute top-0 right-0 bg-red-500 text-white text-[10px] w-4 h-4 rounded-full flex items-center justify-center">{cart.reduce((a,c)=>a+c.qty,0)}</span>}</button>}
                    </nav>

                    {/* Home */}
                    {view === 'home' && (
                        <main className="container mx-auto px-4 py-6 animate-fade-in">
                            <div className="flex gap-2 mb-6">
                                <input type="text" placeholder="ÿ®ÿ≠ÿ´..." className="flex-1 border p-2 rounded-xl" value={searchTerm} onChange={e => setSearchTerm(e.target.value)} />
                                <select className="border p-2 rounded-xl" value={filterCategory} onChange={e => setFilterCategory(e.target.value)}>{PRODUCT_CATEGORIES.map(c => <option key={c} value={c}>{c}</option>)}</select>
                            </div>
                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                {filteredProducts.map(p => (
                                    <div key={p.id} className="bg-white p-3 rounded-2xl shadow hover:shadow-lg cursor-pointer" onClick={() => {setSelectedProduct(p); setView('product-detail');}}>
                                        <img src={p.images[0]} className="w-full aspect-square object-cover rounded-xl mb-2 bg-gray-100" onError={e => e.target.src="https://placehold.co/200"}/>
                                        <h3 className="font-bold truncate">{p.name}</h3>
                                        <div className="flex justify-between items-center mt-1">
                                            <span className="text-emerald-600 font-bold">{p.price} ÿØ.ÿ¨</span>
                                            <button onClick={(e) => {e.stopPropagation(); addToCart(p);}} className="bg-emerald-50 text-emerald-600 p-2 rounded-full"><Icon icon="Plus" size={16}/></button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </main>
                    )}

                    {/* Product Detail */}
                    {view === 'product-detail' && selectedProduct && (
                        <div className="container mx-auto px-4 py-8 animate-fade-in">
                            <button onClick={() => setView('home')} className="mb-4 flex items-center gap-2 text-gray-500">ÿ±ÿ¨Ÿàÿπ</button>
                            <div className="bg-white p-6 rounded-3xl shadow grid md:grid-cols-2 gap-8">
                                <img src={selectedProduct.images[0]} className="w-full rounded-2xl bg-gray-100" onError={e => e.target.src="https://placehold.co/400"}/>
                                <div>
                                    <h1 className="text-2xl font-black mb-2">{selectedProduct.name}</h1>
                                    <p className="text-gray-600 mb-6">{selectedProduct.description}</p>
                                    <div className="flex justify-between items-center border-t pt-4">
                                        <span className="text-3xl font-black text-emerald-600">{selectedProduct.price} ÿØ.ÿ¨</span>
                                        <button onClick={() => addToCart(selectedProduct)} className="px-8 py-3 btn-primary">ÿ•ÿ∂ÿßŸÅÿ© ŸÑŸÑÿ≥ŸÑÿ©</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Checkout */}
                    {view === 'checkout' && (
                        <div className="container mx-auto px-4 py-8 max-w-lg animate-fade-in">
                            <button onClick={() => setView('home')} className="mb-4 text-gray-500">ÿ±ÿ¨Ÿàÿπ</button>
                            <div className="bg-white p-6 rounded-2xl shadow">
                                <h2 className="text-2xl font-bold mb-4">ÿ•ÿ™ŸÖÿßŸÖ ÿßŸÑÿ∑ŸÑÿ®</h2>
                                <div className="mb-4 bg-gray-50 p-3 rounded">ÿßŸÑÿ•ÿ¨ŸÖÿßŸÑŸä: <span className="font-bold text-emerald-600">{(cart.reduce((a,c)=>a+(c.price*c.qty),0)+400).toLocaleString()} ÿØ.ÿ¨</span></div>
                                <form onSubmit={placeOrder} className="space-y-3">
                                    <input required placeholder="ÿßŸÑÿßÿ≥ŸÖ" className="w-full border p-3 rounded-xl" value={formData.fullName} onChange={e => setFormData({...formData, fullName: e.target.value})} />
                                    <input required placeholder="ÿßŸÑŸáÿßÿ™ŸÅ" className="w-full border p-3 rounded-xl" value={formData.phone} onChange={e => setFormData({...formData, phone: e.target.value})} />
                                    <select className="w-full border p-3 rounded-xl" value={formData.wilaya} onChange={e => setFormData({...formData, wilaya: e.target.value})}>{WILAYAS.map(w => <option key={w} value={w}>{w}</option>)}</select>
                                    <input required placeholder="ÿßŸÑÿπŸÜŸàÿßŸÜ" className="w-full border p-3 rounded-xl" value={formData.address} onChange={e => setFormData({...formData, address: e.target.value})} />
                                    <button className="w-full py-3 btn-primary mt-2">ÿ™ÿ£ŸÉŸäÿØ ÿßŸÑÿ∑ŸÑÿ®</button>
                                </form>
                            </div>
                        </div>
                    )}

                    {/* Success */}
                    {view === 'success' && (
                        <div className="h-[60vh] flex flex-col items-center justify-center text-center animate-fade-in">
                            <div className="text-green-500 mb-4"><Icon icon="CheckCircle" size={60}/></div>
                            <h2 className="text-2xl font-bold">ÿ™ŸÖ ÿßŸÑÿ∑ŸÑÿ® ÿ®ŸÜÿ¨ÿßÿ≠!</h2>
                            <button onClick={() => setView('home')} className="mt-6 px-6 py-2 btn-primary">ÿßŸÑÿπŸàÿØÿ©</button>
                        </div>
                    )}

                    {/* Admin Login */}
                    {view === 'admin-login' && (
                        <div className="h-screen flex items-center justify-center">
                            <form onSubmit={(e) => {e.preventDefault(); if(adminPass==='1234'){setIsAdminAuthenticated(true); setView('admin-dashboard');} else alert('ÿÆÿ∑ÿ£');}} className="bg-white p-8 rounded-xl shadow w-80">
                                <h2 className="text-xl font-bold mb-4 text-center">Admin</h2>
                                <input type="password" placeholder="Password" className="w-full border p-2 rounded mb-4" value={adminPass} onChange={e => setAdminPass(e.target.value)}/>
                                <button className="w-full btn-primary py-2">Login</button>
                                <button type="button" onClick={() => setView('home')} className="w-full mt-2 text-sm text-gray-500">Back</button>
                            </form>
                        </div>
                    )}

                    {/* Admin Dashboard */}
                    {view === 'admin-dashboard' && (
                        <div className="container mx-auto p-4 animate-fade-in">
                            <div className="flex justify-between mb-6">
                                <h2 className="text-2xl font-bold">ŸÑŸàÿ≠ÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ</h2>
                                <div className="flex gap-2">
                                    <button onClick={() => setAdminTab('products')} className={`px-4 py-2 rounded ${adminTab==='products'?'bg-emerald-600 text-white':'bg-gray-200'}`}>ÿßŸÑŸÖŸÜÿ™ÿ¨ÿßÿ™</button>
                                    <button onClick={() => setAdminTab('orders')} className={`px-4 py-2 rounded ${adminTab==='orders'?'bg-emerald-600 text-white':'bg-gray-200'}`}>ÿßŸÑÿ∑ŸÑÿ®ÿßÿ™</button>
                                    <button onClick={() => setView('home')} className="text-red-500 px-4">ÿÆÿ±Ÿàÿ¨</button>
                                </div>
                            </div>

                            {adminTab === 'products' && (
                                <div>
                                    <div className="bg-white p-4 rounded-xl shadow mb-6">
                                        <h3 className="font-bold mb-2">ÿ•ÿ∂ÿßŸÅÿ© ŸÖŸÜÿ™ÿ¨</h3>
                                        <div className="grid grid-cols-2 gap-2">
                                            <input placeholder="ÿßŸÑÿßÿ≥ŸÖ" className="border p-2 rounded" value={newProduct.name} onChange={e => setNewProduct({...newProduct, name: e.target.value})} />
                                            <input placeholder="ÿßŸÑÿ≥ÿπÿ±" type="number" className="border p-2 rounded" value={newProduct.price} onChange={e => setNewProduct({...newProduct, price: e.target.value})} />
                                            <input placeholder="ÿ±ÿßÿ®ÿ∑ ÿßŸÑÿµŸàÿ±ÿ©" className="border p-2 rounded" value={newProduct.images} onChange={e => setNewProduct({...newProduct, images: e.target.value})} />
                                            <button onClick={addProduct} className="btn-primary py-2">ÿ•ÿ∂ÿßŸÅÿ©</button>
                                        </div>
                                    </div>
                                    <div className="bg-white rounded-xl shadow overflow-hidden">
                                        {products.map(p => (
                                            <div key={p.id} className="flex justify-between p-4 border-b">
                                                <span>{p.name}</span>
                                                <button onClick={() => deleteProduct(p.id)} className="text-red-500"><Icon icon="Trash2"/></button>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {adminTab === 'orders' && (
                                <div className="space-y-4">
                                    {orders.map(o => (
                                        <div key={o.id} className="bg-white p-4 rounded-xl shadow">
                                            <div className="flex justify-between mb-2">
                                                <span className="font-bold">#{o.id} - {o.customer.fullName}</span>
                                                <select value={o.status} onChange={(e) => updateOrderStatus(o.id, e.target.value)} className="border rounded p-1 text-sm">
                                                    <option value="pending">ÿßŸÜÿ™ÿ∏ÿßÿ±</option>
                                                    <option value="shipped">ÿ¥ÿ≠ŸÜ</option>
                                                    <option value="delivered">ÿ™ÿ≥ŸÑŸäŸÖ</option>
                                                </select>
                                            </div>
                                            <div className="text-sm text-gray-500">
                                                {o.items.map((i, idx) => <span key={idx} className="ml-2">{i.qty}x {i.name}</span>)}
                                            </div>
                                            <div className="font-bold text-emerald-600 mt-2">{o.total} ÿØ.ÿ¨</div>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    )}

                    {/* Cart Sidebar */}
                    {isCartOpen && (
                        <div className="fixed inset-0 z-[100] flex justify-end">
                            <div className="absolute inset-0 bg-black/40" onClick={() => setIsCartOpen(false)}></div>
                            <div className="relative bg-white w-full max-w-md h-full p-6 flex flex-col animate-fade-in">
                                <div className="flex justify-between mb-4"><h2 className="text-xl font-bold">ÿßŸÑÿ≥ŸÑÿ©</h2><button onClick={() => setIsCartOpen(false)}>X</button></div>
                                <div className="flex-1 overflow-y-auto">
                                    {cart.map(item => (
                                        <div key={item.id} className="flex justify-between items-center border-b py-2">
                                            <div><div className="font-bold">{item.name}</div><div className="text-emerald-600">{item.price} ÿØ.ÿ¨</div></div>
                                            <div className="flex items-center gap-2 bg-gray-100 rounded-full p-1">
                                                <button onClick={() => updateCartQuantity(item.id, 1)} className="p-1 bg-white rounded-full">+</button>
                                                <span>{item.qty}</span>
                                                <button onClick={() => updateCartQuantity(item.id, -1)} className="p-1 bg-white rounded-full">-</button>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                {cart.length > 0 && <button onClick={() => {setIsCartOpen(false); setView('checkout')}} className="btn-primary py-3 mt-4">ÿ¥ÿ±ÿßÿ°</button>}
                            </div>
                        </div>
                    )}

                    <footer className="mt-10 py-6 text-center text-gray-400 text-sm border-t">
                        <p>¬© 2024 DZ Shop. <span className="cursor-pointer hover:text-emerald-600" onClick={() => setView('admin-login')}>Admin</span></p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
